<%= @user.subscribers.count %></br>

<% if user_signed_in? %>
  <% if current_user.subscribing?(@user) %>
    <%= form_for(current_user.active_subscriptions.find_by(subscribed_id: @user.id),
             html: { method: :delete }) do |f| %>
      <%= f.submit "Unsubscribe", class: "submit-button" %>
    <% end %>
  <% else %>
    <%= form_for(current_user.active_subscriptions.build) do |f| %>
      <div><%= hidden_field_tag :subscribed_id, @user.id %></div>
      <%= f.submit "Subscribe", class: "submit-button" %>
    <% end %>
  <% end %>
<% end %>

<%= @user.profile.display_name %>

<% @user.subscribers.each do |sub| %>
  <%= sub.username %></br>
<% end %>

<% @user.passive_subscriptions.each do |sub| %>
  <%= sub.stripe_subscription_id %></br>
<% end %>

<% @user.subscribing.each do |sub| %>
  <%= sub.username %></br>
<% end %>

<% @user.active_subscriptions.each do |sub| %>
  <%= sub.stripe_subscription_id %></br>
  <%= sub.amount %></br>
  <%= sub.currency %></br>
<% end %>